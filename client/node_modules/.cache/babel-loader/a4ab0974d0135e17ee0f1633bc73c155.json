{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\simra\\\\Desktop\\\\gta-products-2\\\\src\\\\App.js\";\nimport React from 'react';\nimport HomePage from \"./pages/homepage/homepage.component\";\nimport './App.css';\nimport { Switch, Route, Redirect } from \"react-router-dom\";\nimport ShopPage from \"./pages/shop/shop.component\";\nimport Checkout from \"./pages/checkout/checkoutpage/checkout.component\";\nimport Header from \"./components/header/header.component\";\nimport SignInAndSignUpPage from \"./pages/sign-in-and-sign-up/sign-in-and-sign-up.component\";\nimport { auth, createUserProfileDocument } from \"./firebase/firebase.utils\";\nimport { connect } from \"react-redux\";\nimport { setCurrentUser } from \"./redux/user/users.actions\";\nimport { selectCurrentUser } from \"./redux/user/user.selectors\";\nimport { createStructuredSelector } from \"reselect\";\n\nclass App extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.unSubscribeFromAuth = null;\n  }\n\n  componentDidMount() {\n    //telling to whenever a auth change, update the state of app comp\n    const {\n      setCurrentUser\n    } = this.props;\n    this.unSubscribeFromAuth = auth.onAuthStateChanged(async UsersAuth => {\n      //this UserAuth objects that get passed to createuserprofile fx in the firebase utils\n      //console.log(UsersAuth) // this userAuth returns null if sign out and if sign in returns an auth object with display name email etc.\n      if (UsersAuth) {\n        const userRef = await createUserProfileDocument(UsersAuth);\n        userRef.onSnapshot(snapShot => {\n          //console.log(snapShot.data()) this returns the collections obj(like display name) for that particualar user doc, but snapshot just rerurn the obj\n          setCurrentUser({\n            id: snapShot.id,\n            ...snapShot.data()\n          }); //console.log(setCurrentUser(UsersAuth)) this will start an action type as set current user and payload as big userAuth obj that has all the prop of signed in user\n        });\n      } else {\n        setCurrentUser(UsersAuth); //this will set currentuser to null if there is not Userauth, means no user signed in\n      }\n    });\n  }\n\n  componentWillUnmount() {\n    this.unSubscribeFromAuth();\n  }\n\n  render() {\n    // doesnt work-  const {currentUser} = this.state    <h2>Welcome to {this.state.currentUser.DisplayNam}</h2>\n    return (\n      /*#__PURE__*/\n      //using reducer to pass the props in the header comp\n      React.createElement(\"div\", {\n        className: \"App\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 5\n        }\n      }, /*#__PURE__*/React.createElement(Header, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 7\n        }\n      }), /*#__PURE__*/React.createElement(\"h4\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 7\n        }\n      }, \"GTA PRODUCTS \"), /*#__PURE__*/React.createElement(Switch, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(Route, {\n        path: \"/checkout\",\n        component: Checkout,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 7\n        }\n      }), /*#__PURE__*/React.createElement(Route, {\n        exact: true,\n        path: \"/\",\n        component: HomePage,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 7\n        }\n      }), /*#__PURE__*/React.createElement(Route, {\n        path: \"/shopii\",\n        component: ShopPage,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 6\n        }\n      }), /*#__PURE__*/React.createElement(Route, {\n        exact: true,\n        path: \"/signin\",\n        render: () => this.props.currentUser ? /*#__PURE__*/React.createElement(Redirect, {\n          to: \"/\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 74,\n            columnNumber: 34\n          }\n        }) : /*#__PURE__*/React.createElement(SignInAndSignUpPage, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 11\n          }\n        }),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 6\n        }\n      })))\n    );\n  }\n\n} //we are passing a user obj to the setscuurent user action, dispatch is a way for redux to know whatever obj we are passing\n//will be a action obj and will be passed to all the reducers.\n//the setcurrent user is a fx and we are passsing a obj as a arguement which will be the payload for that.\n\n\nconst mapStateToProps = createStructuredSelector({\n  currentUser: selectCurrentUser\n});\n\nconst mapDispatchToProps = dispatch => ({\n  setCurrentUser: user => dispatch(setCurrentUser(user))\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(App); //first arguement is null bcz we dont need the currentuser prop here in the app comp\n//Route comp takes three attributes, exact means only that path(which exactly maches the path name), path is the url and component is name of the component\n//switch comp only lets run the base url nothing else, but when use exact it only renders the hatspage even with the switch\n//we are placing our header comp out of the swich bz, no matter what switch and route display, header comp will be there for all urls\n//the auth method of firebase keeps the user logged in untill they sign out,\n//unlike express app which required the use of sessions to do so  \n//async fx for createUser bcz its waiting for a query from the db\n//logger tells us the state of the our redux when any action gets fired\n//the prev state is the state before action was fired and second is the \n//action itself and third is the state after the action has modified \n//any of our reducers","map":{"version":3,"sources":["C:/Users/simra/Desktop/gta-products-2/src/App.js"],"names":["React","HomePage","Switch","Route","Redirect","ShopPage","Checkout","Header","SignInAndSignUpPage","auth","createUserProfileDocument","connect","setCurrentUser","selectCurrentUser","createStructuredSelector","App","Component","unSubscribeFromAuth","componentDidMount","props","onAuthStateChanged","UsersAuth","userRef","onSnapshot","snapShot","id","data","componentWillUnmount","render","currentUser","mapStateToProps","mapDispatchToProps","dispatch","user"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport HomePage from \"./pages/homepage/homepage.component\"\r\nimport './App.css';\r\nimport {Switch, Route, Redirect} from \"react-router-dom\";\r\nimport ShopPage from \"./pages/shop/shop.component\"\r\nimport Checkout from \"./pages/checkout/checkoutpage/checkout.component\"\r\n\r\nimport Header from  \"./components/header/header.component\"\r\nimport SignInAndSignUpPage from \"./pages/sign-in-and-sign-up/sign-in-and-sign-up.component\"\r\nimport {auth, createUserProfileDocument} from \"./firebase/firebase.utils\"\r\nimport {connect} from \"react-redux\"\r\nimport {setCurrentUser} from \"./redux/user/users.actions\"\r\nimport {selectCurrentUser} from \"./redux/user/user.selectors\"\r\nimport {createStructuredSelector} from \"reselect\"\r\n\r\n\r\nclass App extends React.Component { \r\n  /*constructor(){\r\n    super()\r\n\r\n    this.state = {\r\n      currentUser: null\r\n    }\r\nwe dont need the constructor bcz we are passing the state as user obj to the reducer\r\n  }*/ \r\n\r\n    unSubscribeFromAuth = null\r\n\r\n\r\n   componentDidMount(){   //telling to whenever a auth change, update the state of app comp\r\n    const {setCurrentUser} = this.props\r\n    this.unSubscribeFromAuth = auth.onAuthStateChanged(async UsersAuth => {     //this UserAuth objects that get passed to createuserprofile fx in the firebase utils\r\n     //console.log(UsersAuth) // this userAuth returns null if sign out and if sign in returns an auth object with display name email etc.\r\n       if(UsersAuth){\r\n      const userRef = await createUserProfileDocument(UsersAuth)\r\n\r\n       userRef.onSnapshot(snapShot => {\r\n        //console.log(snapShot.data()) this returns the collections obj(like display name) for that particualar user doc, but snapshot just rerurn the obj\r\n         setCurrentUser({\r\n           id: snapShot.id,\r\n           ...snapShot.data()\r\n           \r\n         })\r\n  //console.log(setCurrentUser(UsersAuth)) this will start an action type as set current user and payload as big userAuth obj that has all the prop of signed in user\r\n      })\r\n      \r\n\r\n       }\r\n       else {\r\n         setCurrentUser(UsersAuth)  //this will set currentuser to null if there is not Userauth, means no user signed in\r\n       }\r\n    \r\n       \r\n     })\r\n   }\r\n    componentWillUnmount(){\r\n      this.unSubscribeFromAuth()\r\n    }\r\n   render() {\r\n    // doesnt work-  const {currentUser} = this.state    <h2>Welcome to {this.state.currentUser.DisplayNam}</h2>\r\n   return (  \r\n   //using reducer to pass the props in the header comp\r\n    <div className=\"App\">\r\n      <Header  />     \r\n    \r\n      <h4>GTA PRODUCTS </h4>\r\n    \r\n      <Switch>\r\n      <Route  path = \"/checkout\" component = {Checkout} />\r\n      <Route exact  path = \"/\" component = {HomePage}  />\r\n     <Route path = \"/shopii\" component = {ShopPage} />\r\n     \r\n     <Route exact path = \"/signin\" render = {() =>\r\n       this.props.currentUser ? (<Redirect to = \"/\"/>) \r\n       : (<SignInAndSignUpPage />) }/>\r\n      </Switch>\r\n      \r\n    </div>\r\n  );  \r\n}  \r\n}\r\n    //we are passing a user obj to the setscuurent user action, dispatch is a way for redux to know whatever obj we are passing\r\n  //will be a action obj and will be passed to all the reducers.\r\n  //the setcurrent user is a fx and we are passsing a obj as a arguement which will be the payload for that.\r\nconst mapStateToProps = createStructuredSelector({\r\n  currentUser: selectCurrentUser\r\n\r\n})\r\n  \r\n\r\nconst mapDispatchToProps = dispatch => ({\r\n  setCurrentUser: user => dispatch(setCurrentUser(user))    \r\n})\r\n \r\nexport default connect(mapStateToProps, mapDispatchToProps )(App)    //first arguement is null bcz we dont need the currentuser prop here in the app comp\r\n\r\n\r\n\r\n//Route comp takes three attributes, exact means only that path(which exactly maches the path name), path is the url and component is name of the component\r\n //switch comp only lets run the base url nothing else, but when use exact it only renders the hatspage even with the switch\r\n //we are placing our header comp out of the swich bz, no matter what switch and route display, header comp will be there for all urls\r\n  //the auth method of firebase keeps the user logged in untill they sign out,\r\n     //unlike express app which required the use of sessions to do so  \r\n     //async fx for createUser bcz its waiting for a query from the db\r\n\r\n     //logger tells us the state of the our redux when any action gets fired\r\n     //the prev state is the state before action was fired and second is the \r\n     //action itself and third is the state after the action has modified \r\n     //any of our reducers\r\n"]},"metadata":{},"sourceType":"module"}